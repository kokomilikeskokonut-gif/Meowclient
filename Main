-- // 1. Load the Library
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/kokomilikeskokonut-gif/Meow/refs/heads/main/1-main/projects/ui.lua"))()

-- // 2. Configuration
local Settings = {
    StalkActive = false,
    TargetPlayer = nil,
    FollowDistance = 10,
    Vehicle = nil
}

-- // 3. Build UI
local Window = Library:new({name = "Meow - Stalker Car", ConfigName = "MeowStalk"})
local Tab = Window:page({name = "Troll"})
local Section = Tab:section({name = "Stalker Mode"})

Section:button({
    name = "HIJACK NEAREST CAR",
    callback = function()
        local root = game.Players.LocalPlayer.Character.HumanoidRootPart
        for _, v in pairs(workspace:GetDescendants()) do
            if v:IsA("VehicleSeat") then
                if (v.Position - root.Position).Magnitude < 100 then
                    Settings.Vehicle = v.Parent
                    Library:notify("Stalker Car Locked!")
                    break
                end
            end
        end
    end
})

Section:textbox({
    name = "Target Player Name",
    callback = function(val)
        for _, plr in pairs(game.Players:GetPlayers()) do
            if plr.Name:lower():find(val:lower()) then
                Settings.TargetPlayer = plr
                Library:notify("Targeting: " .. plr.Name)
            end
        end
    end
})

Section:toggle({
    name = "Enable Stalking",
    callback = function(v) Settings.StalkActive = v end
})

-- // 4. Logic
local RunService = game:GetService("RunService")

RunService.Heartbeat:Connect(function()
    if Settings.StalkActive and Settings.TargetPlayer and Settings.Vehicle then
        local targetChar = Settings.TargetPlayer.Character
        local targetRoot = targetChar and targetChar:FindFirstChild("HumanoidRootPart")
        local carPart = Settings.Vehicle:FindFirstChildWhichIsA("BasePart", true)
        
        if targetRoot and carPart then
            -- Reset physics so the server doesn't fight the movement
            carPart.AssemblyLinearVelocity = Vector3.new(0, 0, 0)
            carPart.AssemblyAngularVelocity = Vector3.new(0, 0, 0)
            
            -- Calculate a position behind the player
            local behindPos = targetRoot.CFrame * CFrame.new(0, 2, Settings.FollowDistance)
            
            -- Smoothly slide the car to that position
            Settings.Vehicle:PivotTo(carPart.CFrame:Lerp(behindPos, 0.1))
        end
    end
end)
